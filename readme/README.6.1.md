# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## 1. Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных.
Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:
+ Электронные чеки в json виде
+ Склады и автомобильные дороги для логистической компании
+ Генеалогические деревья
+ Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
+ Отношения клиент-покупка для интернет-магазина

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

+ Электронные чеки в json виде

Ответ:

Документо-ориентированные.
NoSQL БД, в которой данные хранятся в виде документов. Данных формат, мне кажется, наиболее
подходящим для типа JSON

+ Склады и автомобильные дороги для логистической компании

Ответ:

Графовые.
Они кажутся наиболее подходящими для логистики.

+ Генеалогические деревья

Ответ:

Иерархические.
Записи связанные друг с другом отношениями родитель-потомок наиболее подходящий
вариант для генеалогического дерева.

+ Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации

Ответ:

Ключ-значение.
Формат пар ключ-значение кажется идеально подходящим для хранения идентификаторов.

+ Отношения клиент-покупка для интернет-магазина

Ответ:

Реляционные. Так как наиболее подходят для сложных связей таблиц, клиент, категории товаров,
товар, прайс и т.д.

## 2. Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме.
Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт - это
отдельная реализация вашей системы и для каждого пункта надо привести классификацию):
+ Данные записываются на все узлы с задержкой до часа (асинхронная запись)
+ При сетевых сбоях, система может разделиться на 2 раздельных кластера
+ Система может не прислать корректный ответ или сбросить соединение

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?


  
+ Данные записываются на все узлы с задержкой до часа (асинхронная запись)

Ответ:
- CAP: AP-система - Эта система обеспечивает AP, т. е. доступность и устойчивость к разделению, компрометируя
согласованность.
- PA/EL - высокая доступность при разделении системы, иначе высокая скорость ответа.
Единовременная консистентность данных здесь играет менее важную роль.

+ При сетевых сбоях, система может разделиться на 2 раздельных кластера

Ответ:
- CAP: AP-система
- PA/EC - При наличии сетевого разделения системы ставка делается на доступность, а при отсутствии
распределения – на консистентность.

+ Система может не прислать корректный ответ или сбросить соединение

Ответ:
- CAP: CP-система -система обеспечивает непротиворечивость и устойчивость к разделам, компрометирующие доступность.
- PC/EC - будут жертвовать доступностью в угоду консистентности, используя огораживание (fencing)
при разделении в распределённых системах. В неразделённых системах «под нож» пойдёт скорость,
так как консистентность – это один из столпов.

## 3. Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

Ответ:

Нет. Базы данных BASE почти полностью отказываются от требований согласованности модели ACID.
Одна из основных концепций, лежащих в основе BASE, заключается в том, что согласованность
данных является проблемой разработчика и не должна обрабатываться базой данных.

## 4. Вам дали задачу написать системное решение, основой которого бы послужили:
+ фиксация некоторых значений с временем жизни
+ реакция на истечение таймаута
Вы слышали о key-value хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие
минусы выбора данной системы?

Ответ:
Pub/sub — интересный механизм, который позволяет, с одной стороны, подписаться на канал и
получать сообщения из него, с другой стороны — отправлять в этот канал сообщение, которое
будет получено всеми подписчиками. 

Минусы:

Механизм pub/sub не гарантирует доставки сообщений, он не гарантирует консистентности,
поэтому не стоит его использовать в системах, для которых важны эти критерии.

Redis – это быстрое хранилище данных типа «ключ‑значение» в памяти с
открытым исходным кодом.
Благодаря быстрой производительности Redis широко применяется для потоковой передачи
приложений с отправкой сообщений по модели «издатель – подписчик» (Pub/Sub).